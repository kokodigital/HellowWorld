<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="phonegap.js"></script>
<script src="childbrowser.js"></script>
<script src="cdv-plugin-fb-connect.js"></script>
<script src="facebook-js-sdk.js"></script>
<script>
function launchBrowser() {
alert((window.plugins.childBrowser != undefined) + " should be true")
window.plugins.childBrowser.showWebPage('http://www.phonegap.com',
{ showLocationBar: true });
}

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
 console.log('1');
  FB.init({
    appId : auth.fbId,
    nativeInterface : CDV.FB,
    useCachedDialogs : false
  });
	console.log('2');
    console.log(FB);
}

var auth = new function() {

  this.fbId = "628828893800003";
  this.FBlogin = function() {
    FB.login(function(response) {

 var uid = null; 
 try {
      uid = response.authResponse.userId;
 } catch (e) {
	  console.log('facebook login');
      console.log(e);
 }

 // iOs Hack other property name for id different
 if (!uid && navigator.userAgent.match(/(iPhone)/i)) {
    try {
       uid = response.authResponse.userID;
    } catch (e) {
		console.log('facebook login');
        console.log(e);
    }
 }

 if (response.status == 'connected') {
	console.log('connected')
	console.log(response.authResponse.accessToken);
	
 } else if (response.status === 'not_authorized') {
   console.log('Error in authentication: not authorized');
 } else {
    console.log('Unknown error in authentication');
 }
    }, {scope : "email"});
  }
}			
			
			

</script>
</head>
<body>
<h1>Plugin tests</h1>
 
<a onClick="launchBrowser();" href="#">Child Browser</a>
<a onClick="auth.FBlogin();" href="#" id="fblogin" >facebook</a>

 
</body>

</html>