<!DOCTYPE html>
<html>
<head>

<title>EaselJS: API Test</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://samaxesjs.googlecode.com/files/jquery.toc-1.1.4.min.js"></script>

<script type="text/javascript" src="src/easeljs/events/EventDispatcher.js"></script>
<script type="text/javascript" src="src/easeljs/utils/UID.js"></script>
<script type="text/javascript" src="src/easeljs/geom/Matrix2D.js"></script>
<script type="text/javascript" src="src/easeljs/display/DisplayObject.js"></script>
<script type="text/javascript" src="src/easeljs/display/Container.js"></script>
<script type="text/javascript" src="src/easeljs/display/Stage.js"></script>
<script type="text/javascript" src="src/easeljs/events/MouseEvent.js"></script>
<script type="text/javascript" src="src/easeljs/display/Shape.js"></script>
<script type="text/javascript" src="src/easeljs/display/Graphics.js"></script>
<script type="text/javascript" src="src/easeljs/geom/Rectangle.js"></script>
<script type="text/javascript" src="src/easeljs/geom/Point.js"></script>
<script type="text/javascript" src="src/easeljs/utils/Ticker.js"></script>
<script type="text/javascript" src="src/easeljs/display/SpriteSheet.js"></script>
<script type="text/javascript" src="src/easeljs/display/Bitmap.js"></script>
<script type="text/javascript" src="src/easeljs/display/BitmapAnimation.js"></script>
<script type="text/javascript" src="src/easeljs/display/Text.js"></script>
<script type="text/javascript" src="src/easeljs/filters/Filter.js"></script>
<script type="text/javascript" src="src/easeljs/filters/BoxBlurFilter.js"></script>
<script type="text/javascript" src="src/easeljs/filters/ColorFilter.js"></script>
<script type="text/javascript" src="src/easeljs/filters/ColorMatrixFilter.js"></script>
<script type="text/javascript" src="src/easeljs/ui/Touch.js"></script>

<script type="text/javascript" src="src/preloadjs/AbstractLoader.js"></script>
<script type="text/javascript" src="src/preloadjs/LoadQueue.js"></script>
<script type="text/javascript" src="src/preloadjs/TagLoader.js"></script>
<script type="text/javascript" src="src/preloadjs/XHRLoader.js"></script>

<!-- We also provide hosted minified versions of all CreateJS libraries.
  http://code.createjs.com -->

<script type="text/javascript">
var canvas;
var stage;
var assets;
var text;

function init() 
{
	canvas = document.getElementById("stage");
		
	stage = new createjs.Stage(canvas);
	stage.width = 960;
	stage.height = 640;
	
	//createjs.Touch.enable(stage);
	
	 createjs.Ticker.addEventListener("tick", handleTick);
	

	text = new createjs.Text("Hello World!", "36px Arial", "#FFF");
	stage.addChild(text);


	var assetManifest = [
		{ id:'up_arrow', src: "assets/ingame/btn_up_arrow.png" },
		{ id:'down_arrow', src: "assets/ingame/btn_down_arrow.png" },
		{ id:'left_arrow', src: "assets/ingame/btn_left_arrow.png" },
		{ id:'right_arrow', src: "assets/ingame/btn_right_arrow.png" }
	];
	
	preloadAssets( assetManifest );
	
	stage.update();
}

function preloadAssets( obj ) 
{
	assets = new createjs.LoadQueue(true);
	assets.onComplete = preloadAssetsComplete;
	assets.loadManifest(obj);
}
 function handleTick(event) {
		 stage.update();
 }
function preloadAssetsComplete()
{

	//var image = new createjs.Bitmap(assets.getItem('up_arrow', true));
	
	var img = new Image();
	img.src =  assets.getResult('up_arrow').src;
	
	var image = new createjs.Bitmap(img);
	image.x = 100;
	image.y = 100;
	
	image.onClick=function(){
		text.text = 'UP';
	}	
	
	stage.addChild(image);
	
	
	var img = new Image();
	img.src =  assets.getResult('down_arrow').src;
	
	var image = new createjs.Bitmap(img);
	image.x = 100;
	image.y = 300;
	
	image.onClick=function(){
		text.text = 'DOWN';
	}	
	
	stage.addChild(image);
}

function BuildButton(obj)
{
	//IMAGE
	var img = new Image();
	img.src = "assets/" + obj.src;
		
	var image = new createjs.Bitmap(img);
	image.x = obj.x;
	image.y = obj.y;
	
	stage.addChild(image);
}

$(init);
</script>
</head>
<body>
<div>
	<canvas style="background:#000;" width="960" height="640" id="stage"></canvas>
</div>
</body>
</html>